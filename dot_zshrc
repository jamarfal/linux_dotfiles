# --- 0. CONFIGURACIÓN DEL SISTEMA (M2/BREW) ---
# Asegura que Homebrew esté en el path
eval "$(/opt/homebrew/bin/brew shellenv)"

# --- 2. HERRAMIENTAS DE RENDIMIENTO (RUST) ---
# Starship: Prompt rápido y bonito
eval "$(starship init zsh)"
# Zoxide: Navegación inteligente (reemplaza a cd)
eval "$(zoxide init zsh)"

# --- 3. JAVA & ANDROID (SDKMAN) ---
# Gestor de versiones de Java
export SDKMAN_DIR="$HOME/.sdkman"
[[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]] && source "$HOME/.sdkman/bin/sdkman-init.sh"

# --- 4. PLUGINS (DESDE BREW) ---
# Sugerencias (gris) y Colores (verde/rojo)
source $(brew --prefix)/share/zsh-autosuggestions/zsh-autosuggestions.zsh
source $(brew --prefix)/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

# Editor por defecto
export EDITOR='nvim'
export VISUAL='nvim'

# --- 5. ALIAS PRO (Para trabajar rápido) ---
#chezmoi edit --apply ~/.zshrc Sistema
alias zconfig="open -e ~/.zshrc"
alias reload="source ~/.zshrc"
alias ll="ls -lah" # Listar todo con detalles

# Git (Lo básico que traía Oh My Zsh)
alias g="git"
alias gst="git status"
alias gco="git checkout"
alias gcb="git checkout -b"
alias gp="git pull"
alias gl="git log --oneline --graph --decorate --all"

# Android Dev
alias gw="./gradlew"
alias gwclean="./gradlew clean"
alias studio="open -a /Applications/Android\ Studio.app ."
alias scrcpy="scrcpy --max-size 1024" # Móvil en pantalla (limitado a 1024p para ir fluido)
# --- MEJORAS VISUALES (MODERN UNIX) ---
# Reemplazar ls con eza (Iconos, Git status, cabeceras)
alias ls="eza --icons --git --header --group-directories-first"
alias ll="eza --icons --git --header --group-directories-first -l"
alias la="eza --icons --git --header --group-directories-first -la"
alias tree="eza --icons --tree" # Ver estructura en árbol

# Reemplazar cat con bat (Syntax highlighting)
alias cat="bat"
alias lg="lazygit"

# --- 6. FUNCIONES EXTRA ---
# Copiar rama actual con Ctrl + G
function copy_git_branch() {
    local branch=$(git branch --show-current 2>/dev/null)
    if [ -n "$branch" ]; then
        echo -n "$branch" | pbcopy
        zle -M "✅ Rama copiada: $branch"
    else
        zle -M "❌ No es un repo Git"
    fi
    zle reset-prompt
}
zle -N copy_git_branch
bindkey '^g' copy_git_branch

# Historial optimizado
HISTSIZE=10000
SAVEHIST=10000
setopt HIST_IGNORE_DUPS
setopt SHARE_HISTORY
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
